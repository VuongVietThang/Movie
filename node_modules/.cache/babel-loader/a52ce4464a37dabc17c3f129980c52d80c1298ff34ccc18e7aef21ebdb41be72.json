{"ast":null,"code":"var _jsxFileName = \"/Users/thaiduy/Movie/src/Pages/SearchPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport MovieCard from '../Components/MovieCard';\nimport SubBanner from '../Components/SubBanner';\nimport NoData from '../Components/Search/noData';\nimport Subscribe from '../Components/Subscribe';\nimport Pagination from '../Components/Pagination';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SearchPage = () => {\n  _s();\n  const {\n    query\n  } = useParams();\n  const [searchResults, setSearchResults] = useState([]);\n  const [totalPages, setTotalPages] = useState(0);\n  const [currentPage, setCurrentPage] = useState(1);\n  useEffect(() => {\n    const controller = new AbortController();\n    fetch(`http://localhost/Movie/backend/API/search.php?query=${query}&page=${currentPage}`).then(res => res.json()).then(data => {\n      console.log('Dữ liệu trả về:', data);\n      if (Array.isArray(data)) {\n        // Backend trả thẳng mảng phim\n        setTotalPages(1);\n        setSearchResults(data);\n      } else {\n        // Backend trả object có cấu trúc {total_pages, movies}\n        setTotalPages(data.total_pages || 1);\n        setSearchResults(data.movies || []);\n      }\n    }).catch(err => {\n      if (err.name !== 'AbortError') {\n        console.error('Lỗi tìm kiếm:', err);\n      }\n    });\n    return () => controller.abort();\n  }, [query, currentPage]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(SubBanner, {\n      title: 'Search Results',\n      pathName: 'Search'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"results-sec\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"section-title\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"sub-title\",\n            children: \"ONLINE STREAMING\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"title\",\n            children: [query, \"'s Related Results\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row movies-grid\",\n          children: searchResults.length ? searchResults.map(movie => /*#__PURE__*/_jsxDEV(MovieCard, {\n            movie: movie\n          }, movie.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 17\n          }, this)) : /*#__PURE__*/_jsxDEV(NoData, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), totalPages > 1 && /*#__PURE__*/_jsxDEV(Pagination, {\n          totalPages: totalPages,\n          currentPage: currentPage,\n          setCurrentPage: setCurrentPage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Subscribe, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(SearchPage, \"f57L+qW190Pyao1PrN9R8MgpoTs=\", false, function () {\n  return [useParams];\n});\n_c = SearchPage;\nexport default SearchPage;\nvar _c;\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"names":["React","useEffect","useState","useParams","MovieCard","SubBanner","NoData","Subscribe","Pagination","jsxDEV","_jsxDEV","Fragment","_Fragment","SearchPage","_s","query","searchResults","setSearchResults","totalPages","setTotalPages","currentPage","setCurrentPage","controller","AbortController","fetch","then","res","json","data","console","log","Array","isArray","total_pages","movies","catch","err","name","error","abort","children","title","pathName","fileName","_jsxFileName","lineNumber","columnNumber","className","length","map","movie","id","_c","$RefreshReg$"],"sources":["/Users/thaiduy/Movie/src/Pages/SearchPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport MovieCard from '../Components/MovieCard';\nimport SubBanner from '../Components/SubBanner';\nimport NoData from '../Components/Search/noData';\nimport Subscribe from '../Components/Subscribe';\nimport Pagination from '../Components/Pagination';\n\nconst SearchPage = () => {\n  const { query } = useParams();\n  const [searchResults, setSearchResults] = useState([]);\n  const [totalPages, setTotalPages] = useState(0);\n  const [currentPage, setCurrentPage] = useState(1);\n\n  useEffect(() => {\n  const controller = new AbortController();\n  \n  fetch(`http://localhost/Movie/backend/API/search.php?query=${query}&page=${currentPage}`)\n\n    .then((res) => res.json())\n    .then((data) => {\n  console.log('Dữ liệu trả về:', data);\n  if (Array.isArray(data)) {\n    // Backend trả thẳng mảng phim\n    setTotalPages(1);\n    setSearchResults(data);\n  } else {\n    // Backend trả object có cấu trúc {total_pages, movies}\n    setTotalPages(data.total_pages || 1);\n    setSearchResults(data.movies || []);\n  }\n})\n\n    .catch((err) => {\n      if (err.name !== 'AbortError') {\n        console.error('Lỗi tìm kiếm:', err);\n      }\n    });\n\n  return () => controller.abort();\n}, [query, currentPage]);\n\n\n  return (\n    <>\n      <SubBanner title={'Search Results'} pathName={'Search'} />\n      <section className='results-sec'>\n        <div className='container'>\n          <div className='section-title'>\n            <h5 className='sub-title'>ONLINE STREAMING</h5>\n            <h2 className='title'>{query}'s Related Results</h2>\n          </div>\n          <div className='row movies-grid'>\n            {searchResults.length ? (\n              searchResults.map((movie) => (\n                <MovieCard movie={movie} key={movie.id} />\n              ))\n            ) : (\n              <NoData />\n            )}\n          </div>\n          {\n            totalPages > 1 &&\n            (\n              <Pagination\n                totalPages={totalPages}\n                currentPage={currentPage}\n                setCurrentPage={setCurrentPage}\n              />\n            )\n          }\n        </div>\n      </section>\n      <Subscribe />\n    </>\n  );\n};\n\nexport default SearchPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}